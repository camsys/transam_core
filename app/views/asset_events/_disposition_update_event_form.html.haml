= render :layout => "update_event_form" do |f|


  .row
    .col-xs-6
      = f.input :event_date, :label => 'Date of Disposition', :wrapper => :vertical_append do
        = f.input_field :event_date, :as => :string, :class => 'form-control datepicker', :data => {'behavior' => 'datepicker'}, :value => format_as_date(f.object.event_date)
        %span.input-group-addon
          %i.fa.fa-calendar
    .col-xs-6
      = f.association :disposition_type, :label => "Disposition Type", :include_blank => false

  .row
    .col-xs-4
      = f.input :sales_proceeds, :wrapper => :vertical_prepend, :label => "Sales Proceeds" do
        %span.input-group-addon
          %i.fa.fa-usd
        = f.input :sales_proceeds, :class => 'form-control', :input_html => { :min => 0 }, :label => false
    .col-xs-4
      = f.input :age_at_disposition, :label => "Age at disposition", :input_html => { :min => 0 }
    .col-xs-4
      = f.input :mileage_at_disposition, :label => "Mileage at disposition", :input_html => { :min => 0 }

  = f.input :new_owner_name, :label => "New Owner Name"
  = f.input :address1, :label => "New Owner Address"
  = f.input :address2, :label => "Address 2"

  .row
    .col-sm-6
      = f.input :city
    .col-sm-3
      = f.input :state, :as => :select, :collection => Country['US'].states, :include_blank => false
    .col-sm-3
      = f.input :zip
  = f.input :comments, :input_html => { :rows => 6 }, :placeholder => "Enter any additional comments..."
  .form-group
    = f.button :submit, "Record disposition", :class => 'btn btn-primary'

:javascript
  $.validator.addMethod(
    "regex",
    function(value, element, regexp) {
      var re = new RegExp(regexp);
      return this.optional(element) || re.test(value);
    },
    "Must be a valid zip code."
  );

  $("input[name='asset_event[zip]']").rules("add", { regex: /^\d{5}([\-]?\d{4})?$/ })
